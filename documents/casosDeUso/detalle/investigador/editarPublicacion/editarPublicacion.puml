@startuml editarPublicacion
skinparam linetype polyline

state in1 as "MI_PUBLICACION_ABIERTA"
in1 -[#green]-> editarPublicacion

state editarPublicacion as "editarPublicacion()" {

    state " " as MostrandoPublicacion
    state " " as EditandoDatos
    state " " as ValidandoDatos

    [*] -[#green]-> MostrandoPublicacion
    note on link
    <b>Investigador</b> solicita editar una publicación propia
    end note

    MostrandoPublicacion -[#green]-> EditandoDatos
    note on link
    <b>Sistema</b> presenta el formulario de edición con los datos actuales:
    • Título
    • Estado
    • Visibilidad
    • Descripción
    • Adjuntos (opcional)

    y permite solicitar las siguientes acciones:
    • Guardar cambios
    • Cancelar
    end note

    EditandoDatos -[#green]-> ValidandoDatos
    note on link
    <b>Investigador</b> solicita guardar cambios
    end note

    ValidandoDatos -[#green]-> [*]
    note on link
    <b>Sistema</b> visualiza la publicación actualizada
    end note

    ValidandoDatos -[#red]-> EditandoDatos
    note on link
    <b>Sistema</b> muestra errores de introducción
    <b>Sistema</b> permite introducir correcciones
    end note

    EditandoDatos -[#red]-> [*]
    note on link
    <b>Investigador</b> solicita cancelar
    <b>Sistema</b> visualiza la publicación sin cambios
    end note
}

editarPublicacion -[#green]-> MI_PUBLICACION_ABIERTA
note on link
Publicación actualizada
end note

editarPublicacion -[#red]-> MIS_PUBLICACIONES_ABIERTAS
note on link
abrirMisPublicaciones()
end note

editarPublicacion -[#green]-> MIS_PUBLICACIONES_ABIERTAS
note on link
eliminarPublicacion()
end note

@enduml
